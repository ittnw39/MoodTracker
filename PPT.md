# ğŸŒ–MoodTrackerğŸŒ’ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°œí‘œ ìë£Œ

## 1. í”„ë¡œì íŠ¸ ì†Œê°œ

### ê°œë°œ ëª©ì 
ì¼ìƒì˜ ê¸°ë¶„ì„ ê°„í¸í•˜ê²Œ ê¸°ë¡í•˜ê³ , ê¸°ë¡ëœ ë°ì´í„°ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ì‚¬ìš©ìê°€ ìì‹ ì˜ ê°ì • ë³€í™” íŒ¨í„´ì„ ì´í•´í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê¸° ìœ„í•´ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.

### ì•±ì˜ ì£¼ìš” íŠ¹ì§•
- **ì§ê´€ì ì¸ ë‹¬ë ¥ UI**: ì›”ë³„ë¡œ ê¸°ë¶„ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆëŠ” ìƒ‰ìƒ ê¸°ë°˜ ë‹¬ë ¥ ì œê³µ.
- **ê°„í¸í•œ ê¸°ë¶„ ê¸°ë¡**: ëª‡ ë²ˆì˜ í„°ì¹˜ë¡œ ì‰½ê³  ë¹ ë¥´ê²Œ ì˜¤ëŠ˜ì˜ ê¸°ë¶„ ì„ íƒ ë° ì €ì¥.
- **ì‚¬ìš©ì ì •ì˜ ê°ì •**: ê¸°ë³¸ ì œê³µ ê°ì • ì™¸ì— ì‚¬ìš©ìë§Œì˜ ê°ì •ì„ ì§ì ‘ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•˜ì—¬ ê°œì¸ ë§ì¶¤í˜• ê¸°ë¡ ê°€ëŠ¥.
- **ìƒì„¸í•œ ê¸°ë¶„ í†µê³„**: ê¸°ê°„ë³„(ì›”ë³„, ì‚¬ìš©ì ì§€ì •, ìµœê·¼ Nì¼ ë“±) ê¸°ë¶„ ë°ì´í„°ë¥¼ íŒŒì´ ì°¨íŠ¸ë¡œ ì‹œê°í™”í•˜ì—¬ ì œê³µ.
- **ë°ì´í„° ì˜ì†ì„±**: ê¸°ë¡ëœ ê¸°ë¶„ ë° ì‚¬ìš©ì ì •ì˜ ê°ì •ì€ ì•± ë‚´ë¶€ì— ì•ˆì „í•˜ê²Œ ì €ì¥.

---

## 2. ì£¼ìš” ê¸°ëŠ¥ ë° í•µì‹¬ ì½”ë“œ

###  ê¸°ëŠ¥ 1: ì›”ë³„ ê¸°ë¶„ ë‹¬ë ¥

#### ì„¤ëª…
- í˜„ì¬ ì›”ì˜ ë‹¬ë ¥ì„ í‘œì‹œí•˜ë©°, ê° ë‚ ì§œì— ê¸°ë¡ëœ ê¸°ë¶„ì„ í•´ë‹¹ ê°ì •ì˜ ìƒ‰ìƒìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
- 'ì´ì „ ë‹¬', 'ë‹¤ìŒ ë‹¬' ë²„íŠ¼ìœ¼ë¡œ ì‰½ê²Œ ì›”ì„ íƒìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì˜¤ëŠ˜ ë‚ ì§œëŠ” íŠ¹ë³„í•œ ìŠ¤íƒ€ì¼(ì˜ˆ: íŒŒë€ìƒ‰ í…ìŠ¤íŠ¸, ì—°ë…¸ë‘ ë°°ê²½)ë¡œ ê°•ì¡°ë˜ë©°, ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‚ ì§œëŠ” í…Œë‘ë¦¬ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
- ì‚¬ìš©ìëŠ” ë‚ ì§œë¥¼ í´ë¦­í•˜ì—¬ í•´ë‹¹ ë‚ ì§œì˜ ê¸°ë¶„ ì •ë³´ë¥¼ í™•ì¸í•˜ê±°ë‚˜, ê¸°ë¶„ ê¸°ë¡/ìˆ˜ì • ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë¯¸ë˜ ë‚ ì§œëŠ” ê¸°ë¡ ë¶ˆê°€)

#### í™”ë©´ ì˜ˆì‹œ
(ì›”ë³„ ë‹¬ë ¥ í™”ë©´ GIF ë˜ëŠ” ìŠ¤í¬ë¦°ìƒ· ì‚½ì… ìœ„ì¹˜)

#### í•µì‹¬ ì½”ë“œ (`MainActivity.kt`)

**ë‹¬ë ¥ UI ë™ì  ìƒì„± (`drawCalendar` í•¨ìˆ˜ ì¼ë¶€)**
```kotlin
// ... (ìƒëµ) ...
private fun drawCalendar() {
    gridCalendar.removeAllViews()
    val loadedMoods = moodsMap // í˜„ì¬ ë¡œë“œëœ ê¸°ë¶„ ë°ì´í„°

    val displayCalendar = currentCalendar.clone() as Calendar
    displayCalendar.set(Calendar.DAY_OF_MONTH, 1)

    val firstDayOfWeek = displayCalendar.get(Calendar.DAY_OF_WEEK)
    val lastDayOfMonth = displayCalendar.getActualMaximum(Calendar.DAY_OF_MONTH)
    // ... (ìš”ì¼ ì´ë¦„ í‘œì‹œ ë¡œì§ ìƒëµ) ...

    // ë‚ ì§œ ì±„ìš°ê¸°
    for (day in 1..lastDayOfMonth) {
        val dayCellCalendar = displayCalendar.clone() as Calendar
        dayCellCalendar.set(Calendar.DAY_OF_MONTH, day)
        val dateKey = SimpleDateFormat("yyyy-MM-dd", Locale.getDefault()).format(dayCellCalendar.time)

        val tvDay = TextView(this)
        tvDay.text = day.toString()
        // ... (ìŠ¤íƒ€ì¼ ì„¤ì •) ...

        tvDay.setOnClickListener {
            // ë¯¸ë˜ ë‚ ì§œ í´ë¦­ ë°©ì§€ ë° ë‚ ì§œ ì„ íƒ ë¡œì§
            val today = Calendar.getInstance()
            if (dayCellCalendar.after(today) && !isSameDay(dayCellCalendar, today)) {
                Toast.makeText(this, "ë¯¸ë˜ ë‚ ì§œì˜ ê¸°ë¶„ì€ ê¸°ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", Toast.LENGTH_SHORT).show()
            } else {
                selectedDateCalendar = dayCellCalendar.clone() as Calendar
                updateSelectedMoodInfo(selectedDateCalendar!!) // ì„ íƒëœ ë‚ ì§œ ì •ë³´ ì—…ë°ì´íŠ¸
                drawCalendar() // ì„ íƒ ì‹œ ë‹¬ë ¥ ë‹¤ì‹œ ê·¸ë ¤ì„œ í…Œë‘ë¦¬ ë“± ë°˜ì˜
            }
        }

        val moodColor = loadedMoods[dateKey] // í•´ë‹¹ ë‚ ì§œì˜ ê¸°ë¶„ ìƒ‰ìƒ ê°€ì ¸ì˜¤ê¸°
        setTodayHighlightOrSelection(tvDay, dayCellCalendar, moodColor) // ê°•ì¡° ë° ë°°ê²½ìƒ‰ ì„¤ì •
        gridCalendar.addView(tvDay)
    }
    // ... (ë‚˜ë¨¸ì§€ ë¹ˆ ì¹¸ ì±„ìš°ê¸° ë¡œì§ ìƒëµ) ...
}
```
- `currentCalendar`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•´ë‹¹ ì›”ì˜ ë‚ ì§œë“¤ì„ `TextView`ë¡œ ë™ì  ìƒì„±í•˜ì—¬ `GridLayout`ì— ì¶”ê°€í•©ë‹ˆë‹¤.
- ê° ë‚ ì§œ `TextView`ì— í´ë¦­ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•˜ì—¬ ë‚ ì§œ ì„ íƒ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ , `selectedDateCalendar`ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
- `moodsMap`ì—ì„œ í•´ë‹¹ ë‚ ì§œì˜ ê¸°ë¶„ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ `setTodayHighlightOrSelection` í•¨ìˆ˜ë¥¼ í†µí•´ ë°°ê²½ìƒ‰ ë° ê°•ì¡° íš¨ê³¼ë¥¼ ì ìš©í•©ë‹ˆë‹¤.

**ì˜¤ëŠ˜ ë‚ ì§œ ë° ì„ íƒ ë‚ ì§œ ê°•ì¡° (`setTodayHighlightOrSelection` í•¨ìˆ˜ ì¼ë¶€)**
```kotlin
private fun setTodayHighlightOrSelection(textView: TextView, calendarForDay: Calendar, moodColorHex: String?) {
    val today = Calendar.getInstance()
    val finalDrawable = GradientDrawable()
    finalDrawable.shape = GradientDrawable.RECTANGLE
    textView.setTextColor(Color.BLACK) // ê¸°ë³¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ

    var currentBgColor: Int
    if (moodColorHex != null) { // ê¸°ë¶„ ê¸°ë¡ì´ ìˆëŠ” ê²½ìš°
        currentBgColor = Color.parseColor(moodColorHex)
    } else { // ê¸°ë¶„ ê¸°ë¡ì´ ì—†ëŠ” ê²½ìš°
        if (isSameDay(calendarForDay, today) &&
            (selectedDateCalendar == null || !isSameDay(calendarForDay, selectedDateCalendar!!))) {
            currentBgColor = Color.parseColor("#FFFFE0") // ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ë³¸ ë°°ê²½
        } else {
            currentBgColor = Color.TRANSPARENT
        }
    }
    finalDrawable.setColor(currentBgColor)

    // ì„ íƒëœ ë‚ ì§œ í…Œë‘ë¦¬ ì ìš©
    if (selectedDateCalendar != null && isSameDay(calendarForDay, selectedDateCalendar!!)) {
        finalDrawable.setStroke(3, Color.BLACK) // ë‘êº¼ìš´ ê²€ì€ìƒ‰ í…Œë‘ë¦¬
    }

    // ì˜¤ëŠ˜ ë‚ ì§œ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ì ìš©
    if (isSameDay(calendarForDay, today)) {
        textView.setTextColor(Color.BLUE)
    }
    textView.background = finalDrawable
}
```
- `GradientDrawable`ì„ ì‚¬ìš©í•˜ì—¬ ë‚ ì§œ ì…€ì˜ ë°°ê²½ ë° í…Œë‘ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
- ê¸°ë¡ëœ ê¸°ë¶„ì´ ìˆìœ¼ë©´ í•´ë‹¹ ê¸°ë¶„ ìƒ‰ìƒì„ ë°°ê²½ìœ¼ë¡œ, ì—†ìœ¼ë©´ íˆ¬ëª… ë˜ëŠ” ì˜¤ëŠ˜ ë‚ ì§œ íŠ¹ë³„ ë°°ê²½ìƒ‰ì„ ì ìš©í•©ë‹ˆë‹¤.
- `selectedDateCalendar`ì™€ í˜„ì¬ ì…€ì˜ ë‚ ì§œê°€ ë™ì¼í•˜ë©´ ê²€ì€ìƒ‰ í…Œë‘ë¦¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
- ì˜¤ëŠ˜ ë‚ ì§œëŠ” í…ìŠ¤íŠ¸ ìƒ‰ìƒì„ íŒŒë€ìƒ‰ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

---

### ê¸°ëŠ¥ 2: ê¸°ë¶„ ê¸°ë¡ ë° ì‚¬ìš©ì ì •ì˜ ê°ì • ê´€ë¦¬

#### ì„¤ëª…
- ì‚¬ìš©ìëŠ” ë‹¬ë ¥ì—ì„œ ë‚ ì§œë¥¼ ì„ íƒ í›„ 'ê¸°ë¶„ ê¸°ë¡í•˜ê¸°' ë²„íŠ¼ì„ í†µí•´ í•´ë‹¹ ë‚ ì§œì˜ ê¸°ë¶„ì„ ê¸°ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê¸°ë¶„ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ì—ëŠ” ê¸°ë³¸ ê°ì •(í–‰ë³µ, ì¢‹ìŒ, ë³´í†µ, ë‚˜ì¨, ìŠ¬í””)ê³¼ ì‚¬ìš©ìê°€ ì¶”ê°€í•œ ê°ì •ì´ í•¨ê»˜ í‘œì‹œë©ë‹ˆë‹¤.
- 'ê°ì • ê´€ë¦¬' ë©”ë‰´ë¥¼ í†µí•´ ì‚¬ìš©ì ì •ì˜ ê°ì •ì„ ì¶”ê°€, ê¸°ì¡´ ê°ì •ì˜ ì´ë¦„ì´ë‚˜ ìƒ‰ìƒì„ ìˆ˜ì •, ë˜ëŠ” ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - ê°ì • ì¶”ê°€/ìˆ˜ì • ì‹œ ì´ë¦„ê³¼ ìƒ‰ìƒ(HEX ì½”ë“œ ì§ì ‘ ì…ë ¥ ë˜ëŠ” ìƒ‰ìƒ ì„ íƒê¸° ì‚¬ìš©)ì„ ì§€ì •í•©ë‹ˆë‹¤.
    - ê°ì • ìˆ˜ì • ì‹œ, í•´ë‹¹ ê°ì •ìœ¼ë¡œ ì´ë¯¸ ê¸°ë¡ëœ ë‚´ì—­ì˜ ìƒ‰ìƒë„ í•¨ê»˜ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
    - ê°ì • ì‚­ì œ ì‹œ, í•´ë‹¹ ê°ì •ìœ¼ë¡œ ê¸°ë¡ëœ ë‚´ì—­ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.

#### í™”ë©´ ì˜ˆì‹œ
(ê¸°ë¶„ ê¸°ë¡ ë‹¤ì´ì–¼ë¡œê·¸, ê°ì • ê´€ë¦¬ í™”ë©´, ê°ì • ì¶”ê°€/ìˆ˜ì • ë‹¤ì´ì–¼ë¡œê·¸ GIF ë˜ëŠ” ìŠ¤í¬ë¦°ìƒ· ì‚½ì… ìœ„ì¹˜)

#### í•µì‹¬ ì½”ë“œ

**ê¸°ë¶„ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ (`MainActivity.kt` - `showMoodLogDialog` ì¼ë¶€)**
```kotlin
private fun showMoodLogDialog(dateToLog: Calendar) {
    val titleDate = SimpleDateFormat("yyyyë…„ Mì›” dì¼", Locale.getDefault()).format(dateToLog.time)
    val dateKey = SimpleDateFormat("yyyy-MM-dd", Locale.getDefault()).format(dateToLog.time)

    val displayableMoods = getAllDisplayableMoods() // ê¸°ë³¸ + ì‚¬ìš©ì ì •ì˜ ê°ì • ëª¨ë‘ ê°€ì ¸ì˜¤ê¸°
    val moodNamesForDialog = displayableMoods.map { it.first }.toTypedArray()

    val existingMoodColor = moodsMap[dateKey]
    var currentSelectedPosition = displayableMoods.indexOfFirst { it.second == existingMoodColor }.takeIf { it != -1 } ?: 0

    val adapter = MoodListAdapter(this, displayableMoods.associate { it.first to it.second }, moodNamesForDialog, currentSelectedPosition)

    val builder = AlertDialog.Builder(this)
    builder.setTitle("${titleDate} ê¸°ë¶„ ì„ íƒ")
    builder.setSingleChoiceItems(adapter, currentSelectedPosition) { _, which ->
        adapter.setSelectedPosition(which)
    }
    builder.setPositiveButton("í™•ì¸") { _, _ ->
        val selectedPosition = adapter.getSelectedPosition()
        // ... (ìœ íš¨ì„± ê²€ì‚¬) ...
        val selectedMoodColor = displayableMoods[selectedPosition].second
        saveMoodToFile(dateKey, selectedMoodColor) // ì„ íƒëœ ê¸°ë¶„ ì €ì¥
        moodsMap = loadMoodsFromFile() // ê¸°ë¶„ ë§µ ë‹¤ì‹œ ë¡œë“œ
        updateSelectedMoodInfo(dateToLog)
        drawCalendar()
        // ... (Toast ë©”ì‹œì§€) ...
    }
    // ... (ì·¨ì†Œ, ì‚­ì œ ë²„íŠ¼ ì„¤ì •) ...
    builder.show()
}
```
- `getAllDisplayableMoods()`ë¥¼ í†µí•´ ê¸°ë³¸ ê°ì •ê³¼ ì‚¬ìš©ì ì •ì˜ ê°ì •ì„ í•©ì³ ëª©ë¡ì„ ë§Œë“­ë‹ˆë‹¤.
- `MoodListAdapter` (ì»¤ìŠ¤í…€ ì–´ëŒ‘í„°)ë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ê°ì • í•­ëª©ì— ì´ë¦„ê³¼ ìƒ‰ìƒ ì›ì„ í‘œì‹œí•©ë‹ˆë‹¤.
- 'í™•ì¸' ë²„íŠ¼ í´ë¦­ ì‹œ ì„ íƒëœ ê°ì •ì˜ ìƒ‰ìƒ ì½”ë“œë¥¼ `saveMoodToFile` í•¨ìˆ˜ë¥¼ í†µí•´ ì €ì¥í•©ë‹ˆë‹¤.

**ê¸°ë¶„ ë°ì´í„° ì €ì¥/ì‚­ì œ (`MainActivity.kt`)**
```kotlin
private fun saveMoodToFile(date: String, moodColor: String) {
    try {
        val currentMoods = moodsMap.toMutableMap()
        currentMoods[date] = moodColor // í•´ë‹¹ ë‚ ì§œì— ê¸°ë¶„ ìƒ‰ìƒ ë§µí•‘
        
        val fileContents = StringBuilder()
        currentMoods.forEach { (d, mc) -> // ì „ì²´ ê¸°ë¶„ ë°ì´í„°ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜
            fileContents.append("$d:$mc\n")
        }
        // ë‚´ë¶€ ì €ì¥ì†Œ íŒŒì¼ì— ì“°ê¸°
        openFileOutput(moodFileName, Context.MODE_PRIVATE).use {
            it.write(fileContents.toString().toByteArray())
        }
    } catch (e: Exception) { /* ... (ì˜¤ë¥˜ ì²˜ë¦¬) ... */ }
}

private fun deleteMoodFromFile(date: String) {
    try {
        val currentMoods = moodsMap.toMutableMap()
        if (currentMoods.containsKey(date)) {
            currentMoods.remove(date) // í•´ë‹¹ ë‚ ì§œì˜ ê¸°ë¶„ ë°ì´í„° ì‚­ì œ
            // ... (ì´í•˜ saveMoodToFileê³¼ ìœ ì‚¬í•˜ê²Œ íŒŒì¼ ë‹¤ì‹œ ì“°ê¸°) ...
        }
    } catch (e: Exception) { /* ... (ì˜¤ë¥˜ ì²˜ë¦¬) ... */ }
}
```
- `mood_data.txt` íŒŒì¼ì— "ë‚ ì§œ:ìƒ‰ìƒì½”ë“œ" í˜•ì‹ìœ¼ë¡œ ê¸°ë¶„ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.
- ì €ì¥ ì‹œì—ëŠ” ì „ì²´ `moodsMap`ì„ íŒŒì¼ì— ë®ì–´ì“°ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

**ì‚¬ìš©ì ì •ì˜ ê°ì • ì¶”ê°€/ìˆ˜ì • (`ManageMoodsActivity.kt` - `showAddMoodDialog` ì¼ë¶€)**
```kotlin
private fun showAddMoodDialog(customMoodToEdit: CustomMood? = null) {
    // ... (ë‹¤ì´ì–¼ë¡œê·¸ UI ì„¤ì • ìƒëµ) ...
    val etMoodName = dialogView.findViewById<EditText>(R.id.etMoodName)
    val etMoodColorLocal = dialogView.findViewById<EditText>(R.id.etMoodColor) // Hex ìƒ‰ìƒ ì½”ë“œ ì…ë ¥ í•„ë“œ
    val btnSelectColor = dialogView.findViewById<Button>(R.id.btnSelectColor) // ìƒ‰ìƒ ì„ íƒê¸° ë²„íŠ¼
    // ...
    btnSelectColor.setOnClickListener {
        // ColorPickerDialog ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒ‰ìƒ ì„ íƒê¸° í˜¸ì¶œ
        ColorPickerDialog.newBuilder()
            .setDialogId(DIALOG_ID_ADD_MOOD) // ì½œë°± êµ¬ë¶„ì„ ìœ„í•œ ID
            .setColor(initialColor) // EditTextì˜ í˜„ì¬ ìƒ‰ìƒ ë˜ëŠ” ê¸°ë³¸ ìƒ‰ìƒ
            .show(this) // 'this'ëŠ” ColorPickerDialogListenerë¥¼ êµ¬í˜„í•œ Activity
    }

    builder.setPositiveButton("ì €ì¥") { _, _ ->
        val moodName = etMoodName.text.toString().trim()
        val moodColor = etMoodColorLocal.text.toString().trim()
        // ... (ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì‚¬) ...

        if (customMoodToEdit != null) { // ìˆ˜ì • ëª¨ë“œ
            val updatedMood = CustomMood(id = customMoodToEdit.id, name = moodName, colorHex = moodColor)
            val success = customMoodRepository.updateCustomMood(updatedMood)
            if (success) {
                updateMoodDataFile(oldColorHex, moodColor) // ê¸°ì¡´ ê¸°ë¡ëœ ê¸°ë¶„ ìƒ‰ìƒ ì—…ë°ì´íŠ¸
                // ...
            }
        } else { // ì¶”ê°€ ëª¨ë“œ
            customMoodRepository.addCustomMood(moodName, moodColor)
            // ...
        }
        loadAndDisplayMoods() // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
    }
    // ...
}

// ColorPickerDialogListener ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
override fun onColorSelected(dialogId: Int, color: Int) {
    if (dialogId == DIALOG_ID_ADD_MOOD) {
        val hexColor = String.format("#%06X", (0xFFFFFF and color))
        currentEtMoodColor?.setText(hexColor) // ì„ íƒëœ ìƒ‰ìƒì„ EditTextì— ë°˜ì˜
    }
}
```
- ê°ì • ì¶”ê°€/ìˆ˜ì • ì‹œ `AlertDialog`ì™€ ì»¤ìŠ¤í…€ ë ˆì´ì•„ì›ƒ(`dialog_add_mood.xml`)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- `jaredrummler:colorpicker` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì—°ë™í•˜ì—¬ ì‚¬ìš©ì ì¹œí™”ì ì¸ ìƒ‰ìƒ ì„ íƒ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
- `CustomMoodRepository`ë¥¼ í†µí•´ ì‚¬ìš©ì ì •ì˜ ê°ì • ë°ì´í„°ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥/ê´€ë¦¬í•©ë‹ˆë‹¤.
- ê°ì • ìˆ˜ì •/ì‚­ì œ ì‹œ `mood_data.txt`ì— ê¸°ë¡ëœ í•´ë‹¹ ê°ì •ì˜ ìƒ‰ìƒ ì½”ë“œë„ ë™ê¸°í™”í•˜ì—¬ ì—…ë°ì´íŠ¸/ì‚­ì œ ì²˜ë¦¬í•©ë‹ˆë‹¤. (`updateMoodDataFile`, `deleteMoodDataFromFile` í•¨ìˆ˜)

**ì‚¬ìš©ì ì •ì˜ ê°ì • ë°ì´í„° ê´€ë¦¬ (`CustomMoodRepository.kt`)**
```kotlin
class CustomMoodRepository(private val context: Context) {
    private val customMoodsFilename = "custom_moods.json"
    private val gson = Gson() // JSON ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ìœ„í•œ Gson ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©

    fun loadCustomMoods(): MutableList<CustomMood> {
        // ... (íŒŒì¼ì—ì„œ JSON ì½ì–´ì™€ CustomMood ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜) ...
        try {
            val jsonString = file.readText()
            val type = object : TypeToken<MutableList<CustomMood>>() {}.type
            return gson.fromJson(jsonString, type) ?: mutableListOf()
        } // ... (ì˜ˆì™¸ ì²˜ë¦¬) ...
    }

    fun saveCustomMoods(moods: List<CustomMood>) {
        // ... (CustomMood ë¦¬ìŠ¤íŠ¸ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•˜ì—¬ íŒŒì¼ì— ì €ì¥) ...
        val jsonString = gson.toJson(moods)
        context.openFileOutput(customMoodsFilename, Context.MODE_PRIVATE).use {
            it.write(jsonString.toByteArray())
        } // ... (ì˜ˆì™¸ ì²˜ë¦¬) ...
    }

    fun addCustomMood(name: String, colorHex: String): CustomMood {
        val moods = loadCustomMoods()
        val newMood = CustomMood(id = UUID.randomUUID().toString(), name = name, colorHex = colorHex)
        moods.add(newMood)
        saveCustomMoods(moods)
        return newMood
    }
    // ... (updateCustomMood, deleteCustomMood í•¨ìˆ˜ êµ¬í˜„) ...
}
```
- `CustomMood` ë°ì´í„° í´ë˜ìŠ¤(id, name, colorHex)ë¥¼ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.
- `Gson` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ `CustomMood` ê°ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ JSON í˜•íƒœë¡œ ì§ë ¬í™”í•˜ì—¬ `custom_moods.json` íŒŒì¼ì— ì €ì¥í•˜ê³ , í•„ìš”ì‹œ ì—­ì§ë ¬í™”í•˜ì—¬ ë¡œë“œí•©ë‹ˆë‹¤.

---

### ê¸°ëŠ¥ 3: ê¸°ë¶„ í†µê³„

#### ì„¤ëª…
- ê¸°ë¡ëœ ê¸°ë¶„ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê¸°ê°„ë³„ í†µê³„ë¥¼ íŒŒì´ ì°¨íŠ¸ í˜•íƒœë¡œ ì œê³µí•©ë‹ˆë‹¤.
- ì‚¬ìš©ìëŠ” ì›”ë³„ ì´ë™, íŠ¹ì • ê¸°ê°„ ì§ì ‘ ì„ íƒ(ì‹œì‘ì¼/ì¢…ë£Œì¼), ë˜ëŠ” ì‚¬ì „ ì •ì˜ëœ ê¸°ê°„(ìµœê·¼ 7ì¼, ìµœê·¼ 30ì¼, ì´ë²ˆ ì£¼) ì„ íƒì„ í†µí•´ í†µê³„ ë²”ìœ„ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- íŒŒì´ ì°¨íŠ¸ì—ëŠ” ê° ê°ì •ì´ í•´ë‹¹ ê¸°ê°„ ë™ì•ˆ ê¸°ë¡ëœ íšŸìˆ˜ì— ë”°ë¼ ë¹„ìœ¨ë¡œ í‘œì‹œë˜ë©°, ê°ì •ì˜ ì´ë¦„ê³¼ ë°±ë¶„ìœ¨ì´ í•¨ê»˜ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
- ê¸°ë³¸ ê°ì •ê³¼ ì‚¬ìš©ì ì •ì˜ ê°ì •ì´ ëª¨ë‘ í†µê³„ì— í¬í•¨ë˜ì–´ ë¶„ì„ë©ë‹ˆë‹¤.

#### í™”ë©´ ì˜ˆì‹œ
(í†µê³„ í™”ë©´ - íŒŒì´ ì°¨íŠ¸ ë° ê¸°ê°„ ì„ íƒ UI GIF ë˜ëŠ” ìŠ¤í¬ë¦°ìƒ· ì‚½ì… ìœ„ì¹˜)

#### í•µì‹¬ ì½”ë“œ (`StatsActivity.kt`)

**í†µê³„ ë°ì´í„° ë¡œë“œ ë° íŒŒì´ ì°¨íŠ¸ ì—…ë°ì´íŠ¸ (`loadPieChartData` í•¨ìˆ˜ ì¼ë¶€)**
```kotlin
private fun loadPieChartData() {
    val allMoodsData = loadMoodsFromFile() // MainActivityì˜ mood_data.txt ë¡œë“œ
    val allDisplayableMoods = getAllDisplayableMoods() // ê¸°ë³¸ + ì‚¬ìš©ì ì •ì˜ ê°ì • ì •ë³´

    val moodCounts = mutableMapOf<String, Int>() // ìƒ‰ìƒ ì½”ë“œë³„ ë¹ˆë„ìˆ˜
    val moodColors = mutableMapOf<String, Int>() // ìƒ‰ìƒ ì½”ë“œë³„ ì‹¤ì œ Color ê°’
    val moodNamesMap = mutableMapOf<String, String>() // ìƒ‰ìƒ ì½”ë“œë³„ ê°ì • ì´ë¦„

    allDisplayableMoods.forEach { (name, colorHex) ->
        try {
            moodNamesMap[colorHex] = name // ìƒ‰ìƒ ì½”ë“œì— ì´ë¦„ ë§µí•‘
            moodColors[colorHex] = Color.parseColor(colorHex) // ìƒ‰ìƒ ì½”ë“œì— Color ê°’ ë§µí•‘
        } catch (e: IllegalArgumentException) { /* ... */ }
    }

    val sdf = SimpleDateFormat("yyyy-MM-dd", Locale.getDefault())

    for ((dateString, colorHex) in allMoodsData) {
        try {
            val recordDate = Calendar.getInstance().apply { time = sdf.parse(dateString)!! }
            
            // ê¸°ê°„ í•„í„°ë§ ë¡œì§
            val isInSelectedRange = when {
                selectedStartDate != null && selectedEndDate != null -> // ì§ì ‘ ê¸°ê°„ ì„ íƒ
                    !recordDate.before(selectedStartDate) && !recordDate.after(selectedEndDate)
                else -> // ì›”ë³„ ë³´ê¸° (selectedStartDate/EndDateê°€ nullì¼ ë•Œ)
                    recordDate.get(Calendar.YEAR) == currentStatsCalendar.get(Calendar.YEAR) &&
                    recordDate.get(Calendar.MONTH) == currentStatsCalendar.get(Calendar.MONTH)
            }

            if (isInSelectedRange && moodNamesMap.containsKey(colorHex)) { // ê¸°ê°„ ë‚´ & ìœ íš¨í•œ ê°ì •
                moodCounts[colorHex] = moodCounts.getOrDefault(colorHex, 0) + 1
            }
        } catch (e: Exception) { /* ... (ë‚ ì§œ íŒŒì‹± ì˜¤ë¥˜ ë“±) ... */ }
    }

    val entries = ArrayList<PieEntry>()
    val colors = ArrayList<Int>()

    for ((colorHex, count) in moodCounts) {
        if (count > 0) {
            entries.add(PieEntry(count.toFloat(), moodNamesMap[colorHex] ?: "ì•Œ ìˆ˜ ì—†ìŒ"))
            colors.add(moodColors[colorHex] ?: Color.GRAY)
        }
    }

    if (entries.isEmpty()) {
        // ... (ë°ì´í„° ì—†ìŒ ì²˜ë¦¬) ...
        pieChart.clear()
        return
    }

    val dataSet = PieDataSet(entries, "") // ë¼ë²¨ ì œê±°
    dataSet.colors = colors
    // ... (dataSet ìŠ¤íƒ€ì¼ ì„¤ì •) ...

    val data = PieData(dataSet)
    // ... (data ìŠ¤íƒ€ì¼ ì„¤ì •) ...
    pieChart.data = data
    pieChart.invalidate() // ì°¨íŠ¸ ìƒˆë¡œê³ ì¹¨
}
```
- `mood_data.txt`ì—ì„œ ëª¨ë“  ê¸°ë¶„ ê¸°ë¡ì„ ë¡œë“œí•©ë‹ˆë‹¤.
- `getAllDisplayableMoods()`ë¡œ ê¸°ë³¸ ë° ì‚¬ìš©ì ì •ì˜ ê°ì • ëª©ë¡(ì´ë¦„, ìƒ‰ìƒ)ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
- ì„ íƒëœ ê¸°ê°„(ì›”ë³„, ì§ì ‘ ì§€ì •, ì‚¬ì „ ì •ì˜)ì— ë”°ë¼ ê¸°ë¶„ ê¸°ë¡ì„ í•„í„°ë§í•©ë‹ˆë‹¤.
- í•„í„°ë§ëœ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê° ê°ì •(ìƒ‰ìƒ ì½”ë“œ ê¸°ì¤€)ì˜ ë¹ˆë„ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
- `MPAndroidChart` ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `PieEntry`ë¥¼ ìƒì„±í•˜ì—¬ íŒŒì´ ì°¨íŠ¸ ë°ì´í„°ë¥¼ êµ¬ì„±í•˜ê³ , ê° ì¡°ê°ì˜ ìƒ‰ìƒì„ ì„¤ì •í•©ë‹ˆë‹¤.
- ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ì°¨íŠ¸ë¥¼ ë¹„ìš°ê³ , ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì°¨íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

**ê¸°ê°„ ì„ íƒ ë¡œì§ (Spinner ë° DatePickerDialog ì—°ë™)**
```kotlin
// Spinner ì•„ì´í…œ ì„ íƒ ë¦¬ìŠ¤ë„ˆ (onCreate ë‚´)
spinnerPredefinedRanges.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {
    override fun onItemSelected(parent: AdapterView<*>, view: View?, position: Int, id: Long) {
        // ... (ì„ íƒëœ í•­ëª©ì— ë”°ë¼ selectedStartDate, selectedEndDate ì„¤ì •) ...
        // ì˜ˆ: "ìµœê·¼ 7ì¼"
        // selectedEndDate = today.clone() as Calendar
        // selectedStartDate = today.clone() as Calendar
        // selectedStartDate!!.add(Calendar.DAY_OF_YEAR, -6)
        updateDateRangeText()
        loadPieChartData()
    }
    // ...
}

// ë‚ ì§œ ì„ íƒ ë²„íŠ¼ í´ë¦­ ë¦¬ìŠ¤ë„ˆ (onCreate ë‚´)
btnStartDate.setOnClickListener {
    showDatePickerDialog(isStartDate = true)
    spinnerPredefinedRanges.setSelection(0, false) // Spinner ì„ íƒ í•´ì œ
}

// DatePickerDialog í‘œì‹œ í•¨ìˆ˜
private fun showDatePickerDialog(isStartDate: Boolean) {
    val calendar = if (isStartDate && selectedStartDate != null) selectedStartDate!!
                   else if (!isStartDate && selectedEndDate != null) selectedEndDate!!
                   else Calendar.getInstance()
    
    DatePickerDialog(this, { _, year, month, dayOfMonth ->
        val selectedCal = Calendar.getInstance().apply { set(year, month, dayOfMonth) }
        if (isStartDate) {
            selectedStartDate = selectedCal
            // ì‹œì‘ì¼ì´ ì¢…ë£Œì¼ë³´ë‹¤ ëŠ¦ìœ¼ë©´ ì¢…ë£Œì¼ë„ ì‹œì‘ì¼ë¡œ ì„¤ì • (ë˜ëŠ” ì˜¤ë¥˜ ì²˜ë¦¬)
            if (selectedEndDate != null && selectedStartDate!!.after(selectedEndDate!!)) {
                selectedEndDate = selectedStartDate!!.clone() as Calendar
            }
        } else {
            selectedEndDate = selectedCal
            // ì¢…ë£Œì¼ì´ ì‹œì‘ì¼ë³´ë‹¤ ì´ë¥´ë©´ ì‹œì‘ì¼ë„ ì¢…ë£Œì¼ë¡œ ì„¤ì • (ë˜ëŠ” ì˜¤ë¥˜ ì²˜ë¦¬)
             if (selectedStartDate != null && selectedEndDate!!.before(selectedStartDate!!)) {
                selectedStartDate = selectedEndDate!!.clone() as Calendar
            }
        }
        updateDateRangeText()
        loadPieChartData()
    }, calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH)).show()
}
```
- `Spinner`ë¥¼ ì‚¬ìš©í•˜ì—¬ "ìµœê·¼ 7ì¼", "ìµœê·¼ 30ì¼", "ì´ë²ˆ ì£¼"ì™€ ê°™ì€ ì‚¬ì „ ì •ì˜ëœ ê¸°ê°„ ì„ íƒ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
- `DatePickerDialog`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ì§ì ‘ ì‹œì‘ ë‚ ì§œì™€ ì¢…ë£Œ ë‚ ì§œë¥¼ ì„ íƒí•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
- ë‚ ì§œ/ê¸°ê°„ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ `selectedStartDate`, `selectedEndDate`ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  `loadPieChartData()`ë¥¼ í˜¸ì¶œí•˜ì—¬ í†µê³„ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.

---

## 3. ê°œë°œ í™˜ê²½

- **ì–¸ì–´**: Kotlin
- **ìµœì†Œ API ë ˆë²¨**: API 21 (Android 5.0 Lollipop)
- **ì•„í‚¤í…ì²˜**: ê¸°ë³¸ì ì¸ MVC íŒ¨í„´ ì§€í–¥ (Activityê°€ Controller ì—­í• , XMLì´ View, ë°ì´í„° íŒŒì¼ ë° Repositoryê°€ Model ì—­í•  ì¼ë¶€ ìˆ˜í–‰)
- **ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬**:
    - `com.github.PhilJay:MPAndroidChart` (í†µê³„ íŒŒì´ ì°¨íŠ¸ ì‹œê°í™”)
    - `com.jaredrummler:colorpicker` (ì‚¬ìš©ì ì •ì˜ ê°ì • ìƒ‰ìƒ ì„ íƒê¸°)
    - `com.google.code.gson:gson` (ì‚¬ìš©ì ì •ì˜ ê°ì • ë°ì´í„° JSON ì§ë ¬í™”/ì—­ì§ë ¬í™”)
- **ë°ì´í„° ì €ì¥**:
    - ì¼ì¼ ê¸°ë¶„ ê¸°ë¡: ë‚´ë¶€ ì €ì¥ì†Œ í…ìŠ¤íŠ¸ íŒŒì¼ (`mood_data.txt`)
    - ì‚¬ìš©ì ì •ì˜ ê°ì •: ë‚´ë¶€ ì €ì¥ì†Œ JSON íŒŒì¼ (`custom_moods.json`)

---

## 4. ê²°ë¡  ë° í–¥í›„ ê°œì„  ë°©í–¥ (ì„ íƒ ì‚¬í•­)

### ê²°ë¡ 
MoodTracker ì•±ì€ ì‚¬ìš©ìê°€ ê°„í¸í•˜ê²Œ ìì‹ ì˜ ê¸°ë¶„ì„ ê¸°ë¡í•˜ê³ , ì‹œê°ì ì¸ í†µê³„ë¥¼ í†µí•´ ê°ì • íŒ¨í„´ì„ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì •ì˜ ê¸°ëŠ¥ì„ í†µí•´ ê°œì¸ì—ê²Œ ë”ìš± ìµœì í™”ëœ ê²½í—˜ì„ ì œê³µí•˜ê³ ì í–ˆìŠµë‹ˆë‹¤.

### í–¥í›„ ê°œì„  ë°©í–¥
- ë°ì´í„° ë°±ì—… ë° ë³µì› ê¸°ëŠ¥ (Google Drive ì—°ë™ ë“±)
- ë‹¤ì–‘í•œ í†µê³„ ë¶„ì„ ê¸°ëŠ¥ ì¶”ê°€ (ì˜ˆ: íŠ¹ì • ê¸°ê°„ ê°ì • ë³€í™” ì¶”ì´ ë¼ì¸ ê·¸ë˜í”„)
- ì•Œë¦¼ ê¸°ëŠ¥ (ì¼ì¼ ê¸°ë¶„ ê¸°ë¡ ë…ë ¤)
- íƒœê·¸ ë˜ëŠ” ë©”ëª¨ ê¸°ëŠ¥ ì¶”ê°€ (ê¸°ë¶„ ê¸°ë¡ ì‹œ ìƒì„¸ ë‚´ìš© ì‘ì„±)

---

ì´ Markdown ë¬¸ì„œë¥¼ PPT ì œì‘ì˜ ê¸°ì´ˆ ìë£Œë¡œ í™œìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ê° "í™”ë©´ ì˜ˆì‹œ" ë¶€ë¶„ì— ì‹¤ì œ ì•± í™”ë©´ GIFë‚˜ ìŠ¤í¬ë¦°ìƒ·ì„ ì¶”ê°€í•˜ê³ , ì½”ë“œ ì„¤ëª… ë¶€ë¶„ì„ ë°œí‘œ íë¦„ì— ë§ê²Œ ì¡°ì ˆí•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”.